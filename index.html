<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Auto Valuasi Saham Indonesia</title>
<style>
body{font-family:Arial;background:#f4f6f9;padding:40px}
.container{max-width:700px;margin:auto;background:white;padding:30px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.1)}
input,button{width:100%;padding:12px;margin:10px 0;border-radius:6px;border:1px solid #ccc}
button{background:#007bff;color:white;border:none;font-size:16px}
button:hover{background:#0056b3}
.result{margin-top:20px;padding:15px;background:#eef2f7;border-radius:6px}
</style>
</head>
<body>

<div class="container">
<h2>Auto Valuasi Saham BEI</h2>

<input type="text" id="symbol" placeholder="Contoh: BBCA atau BBRI">
<button onclick="analisa()">Analisa</button>

<div id="output" class="result"></div>
</div>

<script>

// API KEY ANDA SUDAH DIMASUKKAN DI SINI
const API_KEY = "T9127G8F7LKAJRQU";

async function analisa(){

    let symbol = document.getElementById("symbol").value.toUpperCase();
    const output = document.getElementById("output");

    if(!symbol){
        output.innerHTML = "Masukkan kode saham.";
        return;
    }

    symbol = symbol + ".JK"; // otomatis format saham Indonesia

    output.innerHTML = "Mengambil data...";

    try{

        // Ambil harga
        const profileRes = await fetch(
        `https://financialmodelingprep.com/api/v3/profile/${symbol}?apikey=${API_KEY}`
        );
        const profileData = await profileRes.json();

        if(profileData.length === 0){
            output.innerHTML = "Saham tidak ditemukan.";
            return;
        }

        const price = profileData[0].price;

        // Ambil income statement untuk EPS
        const incomeRes = await fetch(
        `https://financialmodelingprep.com/api/v3/income-statement/${symbol}?limit=2&apikey=${API_KEY}`
        );
        const incomeData = await incomeRes.json();

        if(!incomeData || incomeData.length < 2){
            output.innerHTML = "Data EPS tidak tersedia.";
            return;
        }

        const epsNow = incomeData[0].eps;
        const epsPrev = incomeData[1].eps;

        const growth = ((epsNow - epsPrev) / epsPrev) * 100;
        const per = price / epsNow;
        const peg = per / growth;

        const fairPER = growth;
        const fairPrice = epsNow * fairPER;

        let status = "";

        if(price > fairPrice*1.2){
            status = "SANGAT MAHAL";
        } else if(price > fairPrice){
            status = "MAHAL";
        } else if(price < fairPrice*0.8){
            status = "MURAH";
        } else {
            status = "WAJAR";
        }

        output.innerHTML = `
        <b>Kode:</b> ${symbol}<br><br>
        <b>Harga:</b> ${price.toFixed(2)}<br>
        <b>EPS Terbaru:</b> ${epsNow.toFixed(2)}<br>
        <b>Growth EPS:</b> ${growth.toFixed(2)}%<br>
        <b>PER:</b> ${per.toFixed(2)}<br>
        <b>PEG:</b> ${peg.toFixed(2)}<br><br>
        <b>Estimasi Harga Wajar:</b> ${fairPrice.toFixed(2)}<br><br>
        <b>Status:</b> <b>${status}</b>
        `;

    }catch(error){
        output.innerHTML = "Terjadi error koneksi
