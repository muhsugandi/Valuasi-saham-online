<script>

const API_KEY = "T9127G8F7LKAJRQU";

async function hitung(){
    const symbol = document.getElementById("symbol").value.toUpperCase();
    const output = document.getElementById("output");

    if(!symbol){
        output.innerHTML = "Masukkan kode saham terlebih dahulu.";
        return;
    }

    try {
        const response = await fetch(
        `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${API_KEY}`
        );

        const data = await response.json();

        if(!data["Global Quote"] || !data["Global Quote"]["05. price"]){
            output.innerHTML = "Kode saham tidak ditemukan atau limit API tercapai.";
            return;
        }

        const price = parseFloat(data["Global Quote"]["05. price"]);

        output.innerHTML = `
            <b>Kode:</b> ${symbol} <br>
            <b>Harga Saat Ini:</b> ${price.toFixed(2)}
        `;

    } catch(error){
        output.innerHTML = "Terjadi error koneksi.";
    }
}

</script>
